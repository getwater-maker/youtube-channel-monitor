<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>유튜브 도우미 - 채널 모니터</title>

  <!-- 스타일 -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />

  <!-- 외부 라이브러리 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>유튜브 도우미</h1>

    <!-- 단일 탭(채널 모니터만 유지) -->
    <div class="single-tab-header">
      <span>채널 모니터</span>
      <button id="open-api-key-popup" class="api-key-btn">API 키 입력</button>
    </div>

    <!-- 3열 레이아웃 -->
    <div class="three-col-layout">
      <!-- (1) 채널 추가/관리 컬럼 -->
      <section class="col-section" id="col-channels">
        <div class="col-header">
          <h2>채널 추가</h2>
          <div class="col-actions">
            <button id="add-channel-button">+ 채널 추가</button>
            <span class="count-badge">등록: <span id="channel-count">0</span></span>
          </div>
        </div>

        <div class="sort-row">
          <label>정렬:
            <select id="channel-sort-select">
              <option value="subscribers" selected>구독자수(내림차순)</option>
              <option value="videos">영상갯수(내림차순)</option>
              <option value="latest">최근업로드(최신 우선)</option>
            </select>
          </label>
        </div>

        <div id="channel-list-container" class="channel-vertical-list">
          <p class="muted">채널을 추가하세요.</p>
        </div>
      </section>

      <!-- (2) 돌연변이 영상 컬럼 -->
      <section class="col-section" id="col-mutant">
        <div class="col-header">
          <h2>돌연변이 영상</h2>
          <div class="col-actions">
            <div class="date-range-controls">
              <button data-period="1m">1개월</button>
              <button data-period="3m">3개월</button>
              <button class="active" data-period="6m">6개월</button>
              <button data-period="all">전체</button>
            </div>
          </div>
        </div>

        <div class="sort-row">
          <label>정렬:
            <select id="mutant-sort-select">
              <option value="subscribers" selected>구독자수(내림차순)</option>
              <option value="videos">영상갯수(내림차순)</option>
              <option value="latest">최근업로드(최신 우선)</option>
              <option value="mutantIndex">돌연변이지수(내림차순)</option>
            </select>
          </label>
        </div>

        <div id="mutant-video-list" class="video-vertical-list">
          <p class="muted">채널을 추가하여 영상을 분석해주세요.</p>
        </div>
      </section>

      <!-- (3) 최신 영상 컬럼 -->
      <section class="col-section" id="col-latest">
        <div class="col-header">
          <h2>최신 영상</h2>
        </div>

        <div class="sort-row">
          <label>정렬:
            <select id="latest-sort-select">
              <option value="subscribers" selected>구독자수(내림차순)</option>
              <option value="videos">영상갯수(내림차순)</option>
              <option value="latest">최근업로드(최신 우선)</option>
              <option value="mutantIndex">돌연변이지수(내림차순)</option>
            </select>
          </label>
        </div>

        <div id="latest-video-list" class="video-vertical-list">
          <p class="muted">채널을 추가하여 영상을 분석해주세요.</p>
        </div>
      </section>
    </div>
  </div>

  <!-- ─────────────────────────────────────────────── -->
  <!-- 모달들                                         -->
  <!-- ─────────────────────────────────────────────── -->

  <!-- API 키 입력 모달 -->
  <div id="api-key-modal" class="modal">
    <div class="modal-content">
      <span class="close-button">×</span>
      <h2>API 키 입력</h2>
      <p>5개의 API 키를 입력하거나, 텍스트 파일로 업로드하세요.</p>
      <div id="api-key-inputs">
        <input type="text" class="api-key-input" placeholder="API Key 1" />
        <input type="text" class="api-key-input" placeholder="API Key 2" />
        <input type="text" class="api-key-input" placeholder="API Key 3" />
        <input type="text" class="api-key-input" placeholder="API Key 4" />
        <input type="text" class="api-key-input" placeholder="API Key 5" />
      </div>
      <label for="api-key-file-upload" class="file-upload-label">
        API 키 업로드
        <input type="file" id="api-key-file-upload" accept=".txt" />
      </label>
      <button id="save-api-keys">저장</button>
      <button id="download-api-keys">API 키 다운로드</button>
    </div>
  </div>

  <!-- 채널 추가(검색/직접입력) 모달 -->
  <div id="add-channel-cm-modal" class="modal">
    <div class="modal-content">
      <span class="close-button" id="close-add-channel-cm-modal">×</span>
      <h2>채널 추가</h2>

      <input type="text" id="cm-channel-search-input" placeholder="채널명, ID, URL 모두 가능" />
      <button id="cm-search-channel-btn">검색</button>
      <div id="cm-channel-search-results" style="margin-top:10px;"></div>

      <div style="margin-top: 12px;">
        <input type="text" id="cm-channel-id-input" placeholder="직접 입력: 채널 ID 또는 URL" />
        <button id="cm-save-channel-btn">등록</button>
      </div>
    </div>
  </div>

  <!-- 스크립트(모듈) -->
  <script type="module" src="js/main.js"></script>
</body>
</html>
