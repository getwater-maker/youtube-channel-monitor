/* Modern Dark UI (Refined by Gemini) */
@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css");

:root{
  --bg:#18181b;
  --panel:rgba(255,255,255,.05);
  --glass-bg:rgba(255,255,255,.03);
  --card:#27272a;
  --card-2:#202023;
  --text:#f4f4f5;
  --muted:#a1a1aa;
  --border:#3f3f46;
  
  --brand:#14b8a6;
  --brand-2:#2563eb;
  --ok:#16a34a;
  --danger: #ef4444;

  --shadow:0 6px 20px rgba(0,0,0,.2);
  --radius:12px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:
    radial-gradient(1200px 800px at 80% -20%, rgba(20, 184, 166, .08), transparent 60%),
    radial-gradient(1000px 600px at -10% 20%, rgba(37, 99, 235, .07), transparent 50%),
    var(--bg);
  color:var(--text); font-family:Pretendard, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
  line-height:1.55; letter-spacing:.2px;
}
a{color:inherit;text-decoration:none}
img{display:block;max-width:100%}

#yt-app{max-width:1200px;margin:26px auto;padding:0 16px 48px}
.yt-header{display:flex;align-items:center;justify-content:space-between;padding:6px 10px 18px}
.yt-title{font-weight:900;font-size:28px}

.yt-nav{display:flex;justify-content:space-between;gap:10px;background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:var(--radius);padding:10px;backdrop-filter:blur(6px);box-shadow:var(--shadow)}
.yt-nav-main, .yt-nav-user { display: flex; gap: 10px; align-items: center; }

.yt-tab-btn{appearance:none;border:1px solid var(--border);background-color: var(--panel);color:var(--text);font-weight:800;padding:10px 14px;border-radius:10px;cursor:pointer;transition:all .18s}
.yt-tab-btn:hover{transform:translateY(-1px); background-color: rgba(255,255,255,.08);}
.yt-tab-btn.yt-active{background-color:var(--brand); border-color:transparent; color:#fff;}
.yt-tab{display:none;margin-top:18px}
.yt-tab.yt-active{display:block}

.section{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
.section-header{display:flex;align-items:center;justify-content:space-between;padding:6px 2px 10px}
.section-title{font-weight:900;font-size:20px}
.section-actions{display:flex;gap:8px;align-items:center}
input[type="text"],input[type="search"],input[type="date"],select,textarea{
  width:100%;background:var(--bg);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px 12px;outline:none;transition:border-color .15s, box-shadow .15s
}
textarea{resize:vertical}
input::placeholder,textarea::placeholder{color:var(--muted)}
input:focus,textarea:focus,select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(20, 184, 166, .15)}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;font-weight:800;padding:10px 14px;border-radius:10px;border:1px solid var(--border);background-color:var(--panel);color:var(--text);transition: all .15s}
.btn:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(0,0,0,.25); background-color: var(--border);}
.btn-primary{background-color:var(--brand-2);border-color:transparent;color:#fff}
.btn-primary:hover{background-color:#1d4ed8;}
.btn-outline{background:transparent;border-color:var(--border)}
.btn-danger{background-color:var(--danger);border-color:transparent;color:#fff}
.btn-danger:hover{background-color:#dc2626;}
.btn-sm{padding:7px 10px;font-size:12px}
.btn-success{background-color:var(--ok);border-color:transparent;color:#fff}
.btn-success:hover{background-color:#15803d;}

.toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:12px}
.chip{display:inline-flex;align-items:center;justify-content:center;height:34px;padding:0 12px;border-radius:999px;border:1px solid var(--border);background:var(--panel);color:var(--text);font-weight:800;cursor:pointer}
.chip.active{background-color:var(--brand);border-color:transparent;color:#fff}

.video-grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:18px;}
.video-card{display:flex;flex-direction:column;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow); transition: transform .2s, box-shadow .2s;}
.video-card:hover {transform: translateY(-4px); box-shadow: 0 10px 24px rgba(0,0,0,.35);}
.thumb-wrap{position:relative}
.thumb{width:100%; aspect-ratio: 16/9; object-fit: cover;}
.video-body{padding:12px 14px 6px}
.title{font-weight:900;line-height:1.4;font-size:16px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden; height: 45px;}
.meta{display:flex;align-items:center;gap:8px;margin-top:8px;color:var(--muted);font-weight:700}
.meta img{width:20px;height:20px;border-radius:50%;border:1px solid var(--border)}
.v-meta{margin-top:10px;color:var(--muted);font-size:13px}
.v-meta-top{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.mutant-indicator{display:inline-flex;align-items:center;justify-content:center;padding:4px 8px;border-radius:999px;background-color:var(--brand);color:#fff;font-weight:900;font-size:12px;box-shadow:0 6px 16px rgba(20, 184, 166,.25)}

.video-actions{display:flex;justify-content:space-between;align-items:center;gap:10px;border-top:1px solid var(--border);padding:10px 12px 12px; margin-top: auto;}

.keywords{display:flex;flex-wrap:wrap;gap:6px;padding:12px;}
.kw{padding:6px 10px;border-radius:8px;border:1px solid var(--border);background:rgba(255,255,255,.04);font-weight:800;cursor:pointer}
.kw strong { color: var(--brand); margin-left: 4px; }

.pagination{margin-top:16px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
.pagination .btn{min-width:38px}
.pagination .btn.active{background:var(--brand);border-color:transparent;color:#fff}

#yt-toast-root{position:fixed;bottom:18px;right:18px;display:flex;flex-direction:column;gap:8px;z-index:9999}
.yt-toast{padding:12px 14px;border-radius:10px;border:1px solid var(--border);background:rgba(17,24,39,.92);color:var(--text);font-weight:800;box-shadow:var(--shadow)}
.yt-success{background-color:var(--ok);border-color:transparent;color:#fff}
.yt-error{background-color:var(--danger);border-color:transparent;color:#fff}
.yt-warning{background-color:#f59e0b;border-color:transparent;color:#fff}

.muted{color:var(--muted)}
.empty-state{text-align:center;padding:36px 16px;color:var(--muted)}

:root{scrollbar-color:var(--border) var(--bg);scrollbar-width:thin}
*::-webkit-scrollbar{width:12px;height:12px}
*::-webkit-scrollbar-thumb{background:var(--border);border:3px solid transparent;border-radius:12px;background-clip:padding-box}
*::-webkit-scrollbar-track{background:transparent}

.sp-modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.6); z-index:10000; display:flex; align-items:center; justify-content:center; backdrop-filter:blur(4px); }
.sp-modal { background:var(--card-2); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow); max-width:600px; width:calc(100% - 32px); max-height:calc(100vh - 40px); display:flex; flex-direction:column; }
.sp-modal-head { display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-bottom:1px solid var(--border); }
.sp-modal-title { font-size:18px; font-weight:800; }
.sp-modal-close { font-size:24px; font-weight:bold; cursor:pointer; line-height:1; color:var(--muted); background:none; border:none; padding:0; }
.sp-modal-body { padding:16px; overflow-y:auto; }
.sp-modal-footer { padding: 12px 16px; border-top: 1px solid var(--border); background-color: var(--card); display: flex; justify-content: flex-end; gap: 8px; border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius); }

.header-actions { display: flex; align-items: center; gap: 12px; flex-shrink: 0; }
.api-key-result { font-size: 14px; font-weight: bold; margin-top: 12px; padding: 8px 12px; border-radius: 8px; display: none; }
.api-key-result.success { display: block; color: #c0fde6; background-color: rgba(22, 163, 74, .2); }
.api-key-result.error { display: block; color: #fecaca; background-color: rgba(239, 68, 68, .2); }

.video-card.is-done { border-color: var(--ok); }
.video-card.is-done .thumb-wrap::after { content: '✔'; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); color: white; font-size: 32px; font-weight: bold; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(1px); }

.channel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(225px, 1fr)); gap: 18px; }
.channel-card { background: var(--card-2); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; transition: all .2s ease-in-out; display: flex; flex-direction: column; }
.channel-card:hover { transform: translateY(-4px); box-shadow: 0 10px 24px rgba(0,0,0,.35); border-color: var(--brand); }
.card-banner { height: 100px; background-color: var(--card); background-size: cover; background-position: center; position: relative; }
.card-avatar { width: 80px; height: 80px; border-radius: 50%; border: 4px solid var(--card-2); position: absolute; bottom: -40px; left: 20px; box-shadow: 0 4px 12px rgba(0,0,0,.3); }
.card-body { padding: 16px 20px 20px; margin-top: 40px; display: flex; flex-direction: column; flex-grow: 1; }
.card-title { font-size: 20px; font-weight: 900; line-height: 1.3; margin-bottom: 12px; }
.card-stats { display: flex; gap: 16px; padding: 12px 0; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border); margin-bottom: 12px; }
.stat-item { display: flex; flex-direction: column; align-items: flex-start; line-height: 1.2; }
.stat-item strong { font-size: 16px; font-weight: 800; }
.stat-item span { font-size: 12px; color: var(--muted); }
.card-description { font-size: 14px; color: var(--muted); flex-grow: 1; margin: 0 0 16px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
.card-actions { margin-top: auto; text-align: right; }
.loading-state, .empty-state.error { grid-column: 1 / -1; text-align: center; padding: 48px 16px; color: var(--muted); }
.empty-state.error { color: var(--danger); white-space: pre-wrap; }

.study-container, .study-mode-group { display: flex; flex-direction: column; gap: 16px; }
.study-mode-wrapper { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 16px; }
.mode-title { font-size: 18px; font-weight: 800; margin-bottom: 4px; }
.start-buttons { display: flex; flex-wrap: wrap; gap: 10px; }
.study-button-line { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; align-items: start; }
.study-button-sub-group { display: flex; flex-direction: column; gap: 8px; }
.study-button-sub-group strong { font-size: 14px; margin-bottom: 4px; color: var(--brand-2); }
.study-button-sub-group .btn { width: 100%; }
.progress-bar { text-align: center; font-weight: 800; font-size: 18px; margin-bottom: 16px; color: var(--muted); }
.thumbnail-pair { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.thumbnail-option { border: 4px solid transparent; border-radius: var(--radius); cursor: pointer; transition: all 0.2s ease-in-out; position: relative; overflow: hidden; }
.thumbnail-option:hover { transform: scale(1.03); border-color: var(--brand); }
.thumbnail-option img { width: 100%; aspect-ratio: 16 / 9; object-fit: cover; display: block; }
.thumbnail-option.correct { border-color: var(--ok); box-shadow: 0 0 20px rgba(22, 163, 74, 0.6); }
.thumbnail-option.incorrect { border-color: var(--danger); box-shadow: 0 0 20px rgba(239, 68, 68, 0.6); }
.result-message { text-align: center; font-size: 20px; font-weight: 900; margin-top: 20px; padding: 10px; border-radius: 10px; }
.result-message.correct { background-color: rgba(22, 163, 74, .2); color: #c0fde6; }
.result-message.incorrect { background-color: rgba(239, 68, 68, .2); color: #fecaca; }
.title-study-box { aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; text-align: center; padding: 16px; background-color: var(--card-2); font-size: 1.2rem; font-weight: bold; line-height: 1.4; border-radius: 10px; }

.chart-container { margin: 16px 0; padding: 16px; background: var(--card-2); border-radius: 10px; }
table.styled-table { width: 100%; border-collapse: collapse; margin-top: 16px; }
table.styled-table th, table.styled-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--border); }
table.styled-table th { background-color: var(--card-2); font-weight: 800; }
table.styled-table tbody tr:hover { background-color: var(--panel); }

.tts-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 18px; margin-top: 12px; }
#tts-textarea { height: 300px; resize: vertical; font-size: 16px; line-height: 1.6; }
.tts-controls { display: flex; flex-direction: column; gap: 16px; }
.control-group label { display: block; font-weight: bold; margin-bottom: 8px; }
.control-group select { width: 100%; padding-right: 32px; }
.char-count { font-size: 14px; color: var(--muted); }
.usage-display { font-size: 14px; font-weight: bold; margin-top: 4px; }
.usage-display.limit-exceeded { color: var(--danger); }
.action-buttons { margin-top: auto; display: flex; flex-direction: column; gap: 10px; }
.action-buttons .btn { width: 100%; }

select option { background-color: var(--card-2); color: var(--text); }
/* [추가] select optgroup 스타일 수정 */
select optgroup {
  font-style: italic;
  font-weight: bold;
  color: var(--muted);
  padding: 8px 4px;
}

@media (max-width: 900px) {
  .tts-grid { grid-template-columns: 1fr; }
  .action-buttons { margin-top: 16px; }
}
@media (max-width: 768px){
  .yt-header{flex-direction:column;align-items:flex-start;gap:10px}
  .study-mode-wrapper { grid-template-columns: 1fr; } 
  .study-button-line { grid-template-columns: 1fr; }
}